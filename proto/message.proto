syntax = "proto3";
package message;

import "google/protobuf/timestamp.proto";

message Operation {
  int32 id = 1;
  uint64 nonce = 2;
  bytes pubKey = 3;
  bytes signature = 4;

  google.protobuf.Timestamp timestamp = 9;

  oneof operation {
    Heartbeat heartbeat = 10;
    WithdrawSignature withdrawSignature = 11;
  }
}

message Heartbeat {
  bytes payload = 1;
}

message WithdrawSignature {
  int32 withdrawId = 1;
  bytes signature = 2;
}

message Withdraw {
  int32 id = 1;
  int32 groupId = 2;
  string recipient = 3;
  uint64 amount = 4;
  string status = 5;
  bytes paymentRaw = 6;
  google.protobuf.Timestamp createdAt = 7;
  bytes applyHash = 8;
}

message Withdraws {
  repeated Withdraw data = 1;
}

message Group {
  int32 id = 1;
  repeated int32 keepers = 2;
  google.protobuf.Timestamp createdAt = 3;
}

message Groups {
  repeated Group data = 1;
}
